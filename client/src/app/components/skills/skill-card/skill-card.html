<div 
  class="skill-card"
  (click)="onView()"
  [class.compact]="compact"
  [class.offer-card]="skill.isOffered"
  [class.want-card]="!skill.isOffered"
  [class.inactive]="!skill.isActive"
>
  <div class="card-header">
    <div class="skill-type-badge" [style.background-color]="getSkillTypeColor()">
      <fa-icon [icon]="getSkillTypeIcon()"></fa-icon>
      <span>{{ getSkillTypeLabel() }}</span>
    </div>

    @if (showActions) {
      <div class="card-actions">
        <button 
          class="action-btn edit-btn" 
          (click)="onEdit($event)"
          title="Edit skill"
        >
          <fa-icon [icon]="icons.edit"></fa-icon>
        </button>
        <button 
          class="action-btn delete-btn" 
          (click)="onDelete($event)"
          title="Delete skill"
        >
          <fa-icon [icon]="icons.trash"></fa-icon>
        </button>
      </div>
    }
  </div>

  @if (showUser && skill.owner) {
    <div class="user-info">
      <img 
        [src]="skill.owner.profilePicture || '/assets/images/default-avatar.png'"
        [alt]="skill.owner.name"
        class="user-avatar"
      >
      <div class="user-details">
        <h4>{{ skill.owner.name }}</h4>
        @if (skill.owner.location) {
          <p>
            <fa-icon [icon]="icons.map"></fa-icon>
            {{ skill.owner.location }}
          </p>
        }
      </div>
      <button 
        class="contact-btn" 
        (click)="onContact($event)"
        title="Contact user"
      >
        <fa-icon [icon]="icons.comment"></fa-icon>
      </button>
    </div>
  }

  <div class="card-content">
    <h3 class="skill-title">{{ skill.name }}</h3>

    <p class="skill-description">
      {{ compact ? truncateDescription(80) : truncateDescription(120) }}
    </p>

    <div class="skill-details">
      <div class="detail-item category">
        <fa-icon [icon]="icons.tag"></fa-icon>
        <span>{{ skill.category }}</span>
      </div>

      <div class="detail-item level" [style.color]="getLevelColor()">
        <fa-icon [icon]="icons.star"></fa-icon>
        <span>{{ skill.level }}</span>
      </div>

      @if (skill.mode) {
        <div class="detail-item format">
          <fa-icon [icon]="getFormatIcon()"></fa-icon>
          <span>{{ skill.mode | titlecase }}</span>
        </div>
      }

      @if (skill.duration) {
        <div class="detail-item duration">
          <fa-icon [icon]="icons.clock"></fa-icon>
          <span>{{ skill.duration }} mins</span>
        </div>
      }
    </div>

    @if (skill.tags && skill.tags.length > 0) {
      <div class="skill-tags">
        @for (tag of skill.tags.slice(0, compact ? 3 : 5); track tag) {
          <span class="tag">{{ tag }}</span>
        }
        @if (skill.tags.length > (compact ? 3 : 5)) {
          <span class="more-tags">
            +{{ skill.tags.length - (compact ? 3 : 5) }} more
          </span>
        }
      </div>
    }
  </div>

  <div class="card-footer">
    <div class="footer-left">
      <span class="time-ago">
        <fa-icon [icon]="icons.clock"></fa-icon>
        {{ getTimeAgo() }}
      </span>
      @if (!skill.isActive) {
        <span class="status-indicator">
          <fa-icon [icon]="icons.pause"></fa-icon>
          Inactive
        </span>
      }
    </div>
    <div class="footer-right">
      <button 
        class="view-btn" 
        title="View details"
      >
        <fa-icon [icon]="icons.arrow"></fa-icon>
      </button>
    </div>
  </div>
</div>