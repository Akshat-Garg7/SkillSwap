<div class="dashboard-container">
  <!-- Global loading overlay -->
  @if (loading) {
    <div class="fixed inset-0 bg-white bg-opacity-70 flex items-center justify-center z-50">
      <app-loading-spinner></app-loading-spinner>
    </div>
  }

  @if (error) {
    <div class="error-message">
      <i class="fas fa-exclamation-circle"></i>
      <span>{{ error }}</span>
    </div>
  } @else {
    <div class="dashboard-header">
      <h1>Welcome back, {{ user?.name }}!</h1>
      <p class="subtitle">Your skill exchange hub</p>
      <button class="logout-btn" (click)="logout()">Log Out</button>
    </div>

    <div class="dashboard-stats">
      <div class="stat-card">
        <div class="stat-number">{{ skillsOffered.length }}</div>
        <div class="stat-label">Skills Offered</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">{{ wantedSkills.length }}</div>
        <div class="stat-label">Skills Wanted</div>
      </div>
      <div class="stat-card">
        <div class="stat-number">{{ recentMatches.length }}</div>
        <div class="stat-label">Recent Matches</div>
      </div>
    </div>

    <div class="dashboard-content">
      <div class="dashboard-section">
        <div class="section-header">
          <h2>Quick Actions</h2>
        </div>
        <div class="quick-actions">
          <a routerLink="/skills/create" class="action-btn" (click)="AddSkill()">
            <i class="icon-plus"></i>
            Add New Skill
          </a>
          <a routerLink="/matches/find" class="action-btn" (click)="FindMatches()">
            <i class="icon-search"></i>
            Find Matches
          </a>
          <a routerLink="/messages" class="action-btn" (click)="Message()">
            <i class="icon-message"></i>
            View Messages
          </a>
        </div>
      </div>

      <div class="dashboard-grid"> <div class="dashboard-section"> <div class="section-header"> <h2>Your Skills</h2> <a routerLink="/skills" class="view-all">View All</a> </div> <div class="skills-preview"> <div class="skill-category"> <h3>Offering ({{ skillsOffered.length }})</h3> @if (skillsOffered.length > 0) { <div class="skill-list"> @for (skill of skillsOffered.slice(0, 3); track skill._id) { <div class="skill-item"> <span class="skill-name">{{ skill.name }}</span> <span class="skill-category">{{ skill.category }}</span> </div> } @if (skillsOffered.length > 3) { <div class="more-skills"> +{{ skillsOffered.length - 3 }} more </div> } </div> } @else { <p class="empty-state">No skills offered yet. <a routerLink="/skills/create">Add your first skill</a></p> } </div> <div class="skill-category"> <h3>Looking for ({{ wantedSkills.length }})</h3> @if (wantedSkills.length > 0) { <div class="skill-list"> @for (skill of wantedSkills.slice(0, 3); track skill._id) { <div class="skill-item"> <span class="skill-name">{{ skill.name }}</span> <span class="skill-category">{{ skill.category }}</span> </div> } @if (wantedSkills.length > 3) { <div class="more-skills"> +{{ wantedSkills.length - 3 }} more </div> } </div> } @else { <p class="empty-state">No skills requested yet. <a routerLink="/skills/create">Add skills you want to learn</a></p> } </div> </div> </div> <div class="dashboard-section"> <div class="section-header"> <h2>Recent Matches</h2> <a routerLink="/matches" class="view-all">View All</a> </div> @if (recentMatches.length > 0) { <div class="matches-preview"> @for (match of recentMatches; track match._id) { <div class="match-item"> <div class="match-user"> <img [src]="getOtherUser(match).profilePicture || 'assets/images/default-avatar.png'" [alt]="getOtherUser(match).name" class="user-avatar"> <div class="match-info"> <h4>{{ getOtherUser(match).name }}</h4> <p class="match-skills"> {{ getUserSkill(match).name }} â†” {{ getOtherUserSkill(match).name }} </p> <span class="match-status" [class]="'status-' + match.status"> {{ match.status }} </span> </div> </div> <!-- <div class="match-actions"> @if (match.status === 'pending' && match.initiatedBy._id !== user?._id) { <button (click)="acceptMatch(match._id)" class="btn-accept">Accept</button> } <button (click)="openChat(match)" class="btn-chat">Chat</button> </div> --> </div> } </div> } @else { <p class="empty-state">No matches yet. <a routerLink="/matches/find">Find your first match</a></p> } </div> </div> </div> } </div>
